<div class="py-5">
    <div class="row">
        <div class="col-md-6 mx-auto">
            <span class="anchor" id="creditorDetail"></span>
            <!-- form card login -->
            <div class="card shadow">
                <div class="card-body">
                    <h4 class="card-title mb-4 mt-1">Editar da Credora</h4>
                    <hr/>
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Geral</a>
                            <a class="nav-item nav-link" id="nav-address-tab" data-toggle="tab" href="#nav-address" role="tab" aria-controls="nav-address" aria-selected="false">Endereço</a>
                            <a class="nav-item nav-link" id="nav-contract-tab" data-toggle="tab" href="#nav-contract" role="tab" aria-controls="nav-contract" aria-selected="false">Contrato</a>
                            <a class="nav-item nav-link" id="nav-entities-tab" data-toggle="tab" href="#nav-entities" role="tab" aria-controls="nav-entities" aria-selected="false">Entidades</a>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                            <form class="form" #registerForm="ngForm">
                                <div class="form-group">
                                    <label for="uname1">Razão Social</label>
                                    <input type="text" [(ngModel)]="creditorData.businessname" name="businessName" class="form-control rounded-0" 
                                    [class.is-invalid]="businessName.invalid && businessName.touched" #businessName="ngModel" required >
                                    <div class="md-errors-spacer" [hidden]="businessName.valid || businessName.untouched">
                                        <small  class="text-danger"*ngIf="businessName.errors && businessName.errors.required">
                                            Razão Social obrigatório
                                        </small>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="uname1">Nome Fantasia</label>
                                    <input type="text" [(ngModel)]="creditorData.fantasyname" name="fantasyName" class="form-control rounded-0" 
                                    [class.is-invalid]="fantasyName.invalid && fantasyName.touched" #fantasyName="ngModel" required >
                                    <div class="md-errors-spacer" [hidden]="fantasyName.valid || fantasyName.untouched">
                                        <small  class="text-danger"*ngIf="fantasyName.errors && fantasyName.errors.required">
                                            Nome Fantasia obrigatório
                                        </small>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="uname1">CNPJ</label>
                                            <input type="text" [(ngModel)]="creditorData.cnpj" name="cnpj" class="form-control rounded-0" 
                                            pattern="^\d{2}\.\d{3}\.\d{3}\/\d{4}(-\d{2})$" placeHolder="12.123.123/0001-12"
                                            [class.is-invalid]="cnpj.invalid && cnpj.touched" #cnpj="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="cnpj.valid || cnpj.untouched">
                                                <small  class="text-danger"*ngIf="cnpj.errors && cnpj.errors.required">
                                                    CNPJ obrigatório 
                                                </small>
                                                <small  class="text-danger" *ngIf="cnpj.errors && cnpj.errors.pattern">
                                                    CNPJ inválido (Ex.: 12.123.123/0001-12)
                                                </small>
                                            </div>      
                                        </div>   
                                    </div>
                                </div>     
                                <div class="form-group">                            
                                    <div class="row">
                                        <div class="col-2">
                                            <label for="uname1">DDD</label>
                                            <input type="text" pattern="^([1-9]{2})"
                                            placeHolder="11"
                                            [(ngModel)]="creditorData.dddmodel" name="dddModel" class="form-control rounded-0" 
                                            [class.is-invalid]="dddModel.invalid && dddModel.touched" #dddModel="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="dddModel.valid || dddModel.untouched">
                                                <small  class="text-danger"*ngIf="dddModel.errors && dddModel.errors.required">
                                                    DDD obrigatório
                                                </small>
                                                <small  class="text-danger"*ngIf="(dddModel.errors && dddModel.errors.pattern) || ddHasError">
                                                    DDD inválido
                                                </small>
                                            </div>                                         
                                        </div>
                                        <div class="col-7">
                                            <label for="uname1">Telefone</label>
                                            <input type="text" pattern="^([1-9]{1}[0-9]{3}|[1-9]{1}[0-9]{4})(-)([0-9]{4})"
                                            placeHolder="1234-5678 ou 12345-6789"
                                            [(ngModel)]="creditorData.phone" name="phone" class="form-control rounded-0" 
                                            [class.is-invalid]="phone.invalid && phone.touched" #phone="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="phone.valid || phone.untouched">
                                                <small  class="text-danger"*ngIf="phone.errors && phone.errors.required">
                                                    Telefone obrigatório
                                                </small>
                                                <small  class="text-danger"*ngIf="phone.errors && phone.errors.pattern">
                                                    Formato inválido (Ex.: 1234-5678 ou 12345-6789) 
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>                          
                                <div class="form-group">
                                    <label for="uname1">E-mail</label>
                                    <input #email="ngModel" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" type="text" 
                                    placeHolder="example@example.com"
                                    [(ngModel)]="creditorData.email" name="email" class="form-control rounded-0" 
                                    [class.is-invalid]="email.invalid && email.touched" required>
                                    <div class="md-errors-spacer" [hidden]="email.valid || email.untouched">
                                        <small  class="text-danger"*ngIf="email.errors && email.errors.required">
                                            e-mail obrigatório
                                        </small>
                                        <small  class="text-danger" *ngIf="email.errors && email.errors.pattern">
                                            e-mail inválido (Ex.: example@example.com)
                                        </small>
                                    </div>
                                </div>	

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="updateCreditor()" class="btn btn-rainti btn-block">Alterar</button>
                                        </div>
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="deleteCreditor()" class="btn btn-danger btn-block">Desativar</button>
                                        </div>  
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="backToCreditor()" class="btn btn-info btn-block">Voltar</button>
                                        </div>  
                                    </div>                            
                                </div>     
                            </form>                
                        </div>
                        <div class="tab-pane fade" id="nav-address" role="tabpanel" aria-labelledby="nav-address-tab">
                            <form class="form" #addressForm="ngForm">
                                <div class="form-group">
                                    <label for="uname1">Logradouro</label>
                                    <input type="text" [(ngModel)]="creditorData.address" name="address" class="form-control rounded-0" 
                                    [class.is-invalid]="address.invalid && address.touched" #address="ngModel" required >
                                    <div class="md-errors-spacer" [hidden]="address.valid || address.untouched">
                                        <small  class="text-danger"*ngIf="address.errors && address.errors.required">
                                            Logradouro obrigatório
                                        </small>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <label for="uname1">Número</label>
                                            <input type="text" [(ngModel)]="creditorData.streetnumber" name="streetNumber" class="form-control rounded-0" 
                                            [class.is-invalid]="streetNumber.invalid && streetNumber.touched" #streetNumber="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="streetNumber.valid || streetNumber.untouched">
                                                <small  class="text-danger"*ngIf="streetNumber.errors && streetNumber.errors.required">
                                                    Número do Logradouro obrigatório
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="uname1">Complemento Endereço</label>
                                    <input type="text" [(ngModel)]="creditorData.addresscomplement" name="addressComplement" class="form-control rounded-0" 
                                    [class.is-invalid]="addressComplement.invalid && addressComplement.touched" #addressComplement="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="addressComplement.valid || addressComplement.untouched">
                                                <small  class="text-danger"*ngIf="addressComplement.errors && addressComplement.errors.required">
                                                    Complemento Endereço obrigatório
                                                </small>
                                            </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="uname1">Bairro</label>
                                            <input type="text" [(ngModel)]="creditorData.district" name="district" class="form-control rounded-0" 
                                            [class.is-invalid]="district.invalid && district.touched" #district="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="district.valid || district.untouched">
                                                <small  class="text-danger"*ngIf="district.errors && district.errors.required">
                                                    Bairro obrigatório
                                                </small>
                                            </div>
                                        </div>    
                                        <div class="col-6">
                                            <label for="uname1">Municipio</label>
                                             <input type="text" [(ngModel)]="creditorData.county" name="county" class="form-control rounded-0" 
                                             [class.is-invalid]="county.invalid && county.touched" #county="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="county.valid || county.untouched">
                                                <small  class="text-danger"*ngIf="county.errors && county.errors.required">
                                                    Municipio obrigatório
                                                </small>
                                            </div>
                                        </div>                                                   
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-7">
                                            <label for="uname1">Estado</label>
                                            <select class="custom-select" 
                                            #topic="ngModel" [class.is-invalid]="topicHasError && topic.touched" name="topic" 
                                            [(ngModel)]="creditorData.topic" (change)="validateTopic(topic.value)" (blur)="validateTopic(topic.value)">                            
                                                <option value="default">{{creditorData.topic }}</option>
                                                <option *ngFor="let state of _states">{{ state.description }}</option>
                                            </select>
                                            <small class="text-danger" [class.d-none]="!topicHasError || topic.untouched">Escolha um Estado</small>
                                        </div> 
                                        <div class="col-5">   
                                            <label for="uname1">Cep</label>
                                            <input type="text" [(ngModel)]="creditorData.zipcode" name="zipCode" class="form-control rounded-0" 
                                            pattern="^([0-9]{5})(-)([0-9]{3})$" placeHolder="12345-678"
                                            [class.is-invalid]="zipCode.invalid && zipCode.touched" #zipCode="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="zipCode.valid || zipCode.untouched">
                                                <small  class="text-danger"*ngIf="zipCode.errors && zipCode.errors.required">
                                                    Cep obrigatório
                                                </small>
                                                <small  class="text-danger" *ngIf="zipCode.errors && zipCode.errors.pattern">
                                                    Cep inválido (Ex.: 12345-678)
                                                </small>
                                            </div>                                   
                                        </div> 
                                    </div> 
                                </div>    
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="updateCreditor()" class="btn btn-rainti btn-block">Alterar</button>
                                        </div>
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="deleteCreditor()" class="btn btn-danger btn-block">Desativar</button>
                                        </div>  
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="backToCreditor()" class="btn btn-info btn-block">Voltar</button>
                                        </div>  
                                    </div>                            
                                </div>     
                            </form>                
                        </div>
                        <div class="tab-pane fade" id="nav-contract" role="tabpanel" aria-labelledby="nav-contract-tab">
                            <form class="form" #contractForm="ngForm">
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="uname1">Contrato</label>
                                            <input type="text" [(ngModel)]="creditorData.contract" name="contract" class="form-control rounded-0" 
                                            pattern="^.{6,}$" placeHolder="A1B23C"
                                            [class.is-invalid]="contract.invalid && contract.touched" #contract="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="contract.valid || contract.untouched">
                                                <small  class="text-danger"*ngIf="contract.errors && contract.errors.required">
                                                    contrato inválido (Minimo 6 posições)
                                                </small>
                                                <small  class="text-danger" *ngIf="contract.errors && contract.errors.pattern">
                                                    contrato inválido (Ex.: A1B23C minimo 6 posições)
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="uname1">Data Inicio</label>
                                            <input type="date" [(ngModel)]="creditorData.startdate" name="startDate" class="form-control rounded-0" 
                                            [class.is-invalid]="startDate.invalid && startDate.touched" #startDate="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="startDate.valid || startDate.untouched">
                                                <small  class="text-danger"*ngIf="startDate.errors && startDate.errors.required">
                                                    Data Inicio inválida 
                                                </small>
                                            </div>
                                        </div> 
                                        <div class="col-6">
                                            <label for="uname1">Data Final</label>
                                            <input type="date" [(ngModel)]="creditorData.enddate" name="endDate" class="form-control rounded-0" 
                                            [class.is-invalid]="endDate.invalid && endDate.touched" #endDate="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="endDate.valid || endDate.untouched">
                                                <small  class="text-danger"*ngIf="endDate.errors && endDate.errors.required">
                                                    Data Final inválida 
                                                </small>
                                            </div>
                                        </div>    
                                    </div>                                                   
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="updateCreditor()" class="btn btn-rainti btn-block">Alterar</button>
                                        </div>
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="deleteCreditor()" class="btn btn-danger btn-block">Desativar</button>
                                        </div>  
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="backToCreditor()" class="btn btn-info btn-block">Voltar</button>
                                        </div>  
                                    </div>                            
                                </div>  
                            </form> 
                        </div>
                        <div class="tab-pane fade" id="nav-entities" role="tabpanel" aria-labelledby="nav-entities-tab">
                            <form class="form" #entitiesForm="ngForm"> 
                                <nav>
                                    <div class="nav nav-tabs2" id="nav-tab2" role="tablist2">
                                        <a class="nav-item2 nav-link active" id="nav-detrans-tab" data-toggle="tab" href="#nav-detrans" role="tab" aria-controls="nav-detran" aria-selected="true">Detrans</a>
                                        <a class="nav-item2 nav-link" id="nav-creditorsgroup-tab" data-toggle="tab" href="#nav-creditorsgroup" role="tab" aria-controls="nav-creditorsgroup" aria-selected="false">Gestoras</a>
                                    </div>
                                </nav>      
                                <div class="tab-content" id="nav-tabContent2">
                                    <div class="tab-pane fade show active" id="nav-detrans" role="tabpanel" aria-labelledby="nav-detrans-tab">
                                        <form class="form" #detransForm="ngForm">
                                            <div class="form-group">
                                                <div>
                                                    <h5>Selecione os Detrans</h5>                                                                 
                                                </div>                                    
                                                <label>Selecionar/Limpar Todos: <input type="checkbox" (click)="checkAllOptions()"></label><br/>   
                                                <div class="container-rainti btn-group btn-group-toggle btn-group-vertical" style="padding-top: 10px;"required>                                            
                                                    <div class="text-left" *ngFor="let detran of _detrans ">
                                                        <label class="custom-control custom-checkbox" >
                                                            <input type="checkbox" [checked]="detran.checked" name="detranOptions" id="{{detran.id}}" autocomplete="off" (change)="checkDetransChange($event)"> {{ detran.description }}
                                                        </label>
                                                    </div>
                                                </div> 
                                            </div>
                                        </form>
                                    </div>    
                                    <div class="tab-pane fade" id="nav-creditorsgroup" role="tabpanel" aria-labelledby="nav-creditorsgroup-tab">
                                        <form class="form" #creditorsgroupForm="ngForm">
                                            <div class="form-group">
                                                <div>
                                                    <h5>Selecione a Gestora</h5>                                                                 
                                                </div>                                    
                                                <div>
                                                    <button type="button" class="btn btn-primary" data-toggle="button" class="btn btn-primary btn-sm" data-toggle="button" aria-pressed="false" autocomplete="off" (click)="uncheckAllOptions()">Limpar</button>
                                                </div>                                    
                                                <div class="container-rainti btn-group btn-group-toggle btn-group-vertical" style="padding-top: 20px;">                                            
                                                    <div class="text-left" *ngFor="let creditorgroup of _creditorsgroup">
                                                        <label class="custom-control custom-checkbox" >
                                                            <input type="checkbox" [checked]="creditorgroup.checked" name="creditorgroupOptions" id="{{creditorgroup.id}}" autocomplete="off" (change)="checkCreditorsGroupChange($event)"> {{ creditorgroup.description }}
                                                        </label>
                                                    </div>
                                                </div> 	
                                            </div>
                                        </form>
                                    </div>    
                                </div>                          
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="updateCreditor()" class="btn btn-rainti btn-block">Alterar</button>
                                        </div>
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="deleteCreditor()" class="btn btn-danger btn-block">Desativar</button>
                                        </div>  
                                        <div class="col-sm-4">
                                            <button type="submit" (click)="backToCreditor()" class="btn btn-info btn-block">Voltar</button>
                                        </div>  
                                    </div>                            
                                </div>     
                            </form>                
                        </div>
                    </div>
                    <hr/>
                    <div class="alert alert-danger text-center text-danger" *ngIf="_errorMessage">
                        {{_errorMessage}}
                    </div> 
                    <div class="alert alert-primary text-center text-primary" *ngIf="_registerUpdated">
                        {{_registerUpdated}}
                    </div>                                    
                </div>
            </div>
            <!-- /form card login -->
        </div>
    </div>
</div>
    


