<div class="py-5">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <span class="anchor" id="formLogin"></span>
            <!-- form card login -->
            <div class="card shadow">
                  <div class="card-body">
                    <h4 class="card-title mb-4 mt-1">Cadastro de usuário</h4>
                    <hr/>
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                          <a class="nav-item nav-link active" id="user-data-tab" data-toggle="tab" href="#user-data" role="tab" aria-controls="user-data" aria-selected="true"  >Dados do Usuário</a>
                          <a class="nav-item nav-link " id="user-profile-tab" data-toggle="tab" href="#user-profile" role="tab" aria-controls="user-profile" aria-selected="false" >Perfil de Acesso</a>
                        </div>
                      </nav>
                      <!-- User data TAB -->
                      <div class="tab-content" id="nav-tabContent" style="padding-top: 10px;">
                        <div class="tab-pane fade show active " id="user-data" role="tabpanel" aria-labelledby="user-data-tab" >

                            <form class="form" #registerForm="ngForm" >
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label for="uname1">Nome</label>
                                            <input type="text" [(ngModel)]="registerUserData.firstName" name="firstName"  class="form-control rounded-0" 
                                            [class.is-invalid]="name.invalid && name.touched" #name="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="name.valid || name.untouched">
                                                <small  class="text-danger"*ngIf="name.errors && name.errors.required">
                                                    nome obrigatório
                                                </small>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <label for="uname1">Sobrenome</label>
                                            <input type="text" [(ngModel)]="registerUserData.lastName" name="lastName" class="form-control rounded-0" 
                                            [class.is-invalid]="lastName.invalid && lastName.touched" #lastName="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="lastName.valid || lastName.untouched">
                                                <small  class="text-danger"*ngIf="lastName.errors && lastName.errors.required">
                                                    sobrenome obrigatório
                                                </small>
                                            </div>
                                        </div>  
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="uname1">Nome de usuário</label>
                                    <input type="text" [(ngModel)]="registerUserData.userName" name="userName" class="form-control rounded-0" 
                                    [class.is-invalid]="userName.invalid && userName.touched" #userName="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="userName.valid || userName.untouched">
                                                <small  class="text-danger"*ngIf="userName.errors && userName.errors.required">
                                                    Nome de usuário obrigatória
                                                </small>
                                            </div>
                                </div>
                                <div class="form-group">
                                    <label for="uname1">E-mail</label>
                                    <input #email="ngModel" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" type="text" 
                                    [(ngModel)]="registerUserData.email" name="email" class="form-control rounded-0" 
                                    [class.is-invalid]="email.invalid && email.touched" required>
                                    <div class="md-errors-spacer" [hidden]="email.valid || email.untouched">
                                        <small  class="text-danger"*ngIf="email.errors && email.errors.required">
                                            e-mail obrigatório
                                        </small>
                                        <small  class="text-danger" *ngIf="email.errors && email.errors.pattern">
                                            e-mail inválido
                                        </small>
                                    </div>
                                </div>
                                <div class="form-group">                            
                                    <div class="row">
                                        <div class="col-3">
                                            <label for="uname1">DDD</label>
                                            <input type="text" pattern="^([1-9]{2})"
                                            placeHolder="11"
                                            [(ngModel)]="registerUserData.dddModel" name="dddModel" class="form-control rounded-0" 
                                            [class.is-invalid]="dddModel.invalid && dddModel.touched" #dddModel="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="dddModel.valid || dddModel.untouched">
                                                <small  class="text-danger"*ngIf="dddModel.errors && dddModel.errors.required">
                                                    DDD obrigatório
                                                </small>
                                                <small  class="text-danger"*ngIf="(dddModel.errors && dddModel.errors.pattern) || ddHasError">
                                                    DDD inválido
                                                </small>
                                           </div>
                                          
                                        </div>
                                        <div class="col">
                                            <label for="uname1">Telefone</label>
                                            <input type="text" pattern="^([1-9]{1}[0-9]{3}|[1-9]{1}[0-9]{4})(-)([0-9]{4})"
                                            placeHolder="1234-5678 ou 12345-6789"
                                            [(ngModel)]="registerUserData.phone" name="phone" class="form-control rounded-0" 
                                            [class.is-invalid]="phone.invalid && phone.touched" #phone="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="phone.valid || phone.untouched">
                                                <small  class="text-danger"*ngIf="phone.errors && phone.errors.required">
                                                    Telefone obrigatório
                                                </small>
                                                <small  class="text-danger"*ngIf="phone.errors && phone.errors.pattern">
                                                    Formato inválido (Ex.: 1234-5678 ou 12345-6789) 
                                                </small>
                                           </div>
                                        </div>
                                    </div>
                                </div>  
                                <div class="form-group">
                                    <label for="uname1">CPF</label>
                                    <input type="text" [(ngModel)]="registerUserData.cpf" name="cpf" class="form-control rounded-0" 
                                    pattern="^\d{3}\.\d{3}\.\d{3}(-\d{2})$" placeHolder="123.123.123-12"
                                    [class.is-invalid]="cpf.invalid && cpf.touched" #cpf="ngModel" required >
                                            <div class="md-errors-spacer" [hidden]="cpf.valid || cpf.untouched">
                                                <small  class="text-danger"*ngIf="cpf.errors && cpf.errors.required">
                                                    CNPJ obrigatório 
                                                </small>
                                                <small  class="text-danger" *ngIf="cpf.errors && cpf.errors.pattern">
                                                    CNPJ inválido (Ex.: 123.123.123-12)
                                                </small>
                                            </div>
                                </div>                     
                                <hr/>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-6">                   
                                            <button type="submit" (click)="backToUsers()" class="btn btn-info btn-block">Voltar</button>                                            
                                        </div>  
                                        <div class="col-sm-6">
                                            <button type="submit" [disabled]="registerForm.form.invalid" (click)="nextTab('user-profile')"  class="btn btn-rainti btn-block ">Próximo</button>                                                            
                                        </div>  
                                    </div>                            
                                </div> 
                          </form>
                        </div>

                        <!-- User Profile TAB -->
                        <form
                         class="tab-pane fade" id="user-profile" role="tabpanel" aria-labelledby="user-profile-tab" >
                            <form class="form" #profileForm="ngForm" ></form>
                                <div class="form-group">
                                    <div>
                                        <h5>Selecione o Grupo de Acesso</h5>                                                                 
                                    </div>                                        
                                    <div class="btn-group btn-group-toggle btn-group-vertical" data-toggle="buttons" style="padding-top: 10px;" required>                                            
                                        <button type="button" (click)="CheckAllOptions()">Toggle</button>
                                        <div class="col-lg" *ngFor="let group of _groups">
                                            
                                            <label class="btn btn-outline-rainti"  >
                                                <input  class="btn btn-outline-rainti" type="checkbox" [(ngModel)]="group.checked" value="group.value" name="groupOptions"  id="{{group.id}}" autocomplete="off"> {{ group.name }}
                                            </label>
                                            <label class="px-2">{{group.entityname}}</label>
                                        </div>
                                    </div> 
                                    
                                </div>  
                                <hr/>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-sm-6">                   
                                            <button type="submit" (click)="backToUsers()" class="btn btn-info btn-block float-right">Voltar</button>
                                        </div>  
                                        <div class="col-sm-6">                                        
                                            <button type="submit" [disabled]="profileForm.form.invalid" (click)="createUser()" class="btn btn-rainti btn-block ">Finalizar</button>                
                                        </div>  
                                    </div>                            
                                </div> 
                            </form>
                        </div>
                        
                      </div>
                                       
            </div>
            <!-- /form card login -->
        </div>
    </div>
</div>
    

